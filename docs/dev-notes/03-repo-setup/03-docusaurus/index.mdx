import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";
import NEXTjsReadme from "!!raw-loader!./_project-docs/readme-nextjs.md";
import AngularReadme from "!!raw-loader!./_project-docs/readme-angular.md";
import VueReadme from "!!raw-loader!./_project-docs/readme-vue.md";
import ProjectDocsHomepage from "!!raw-loader!./_project-docs/index.mdx";
import ProjectDocsScriptsNEXTjs from "!!raw-loader!./_project-docs/scripts-nextjs.md";
import ProjectDocsScriptsAngular from "!!raw-loader!./_project-docs/scripts-angular.md";
import ProjectDocsScriptsVue from "!!raw-loader!./_project-docs/scripts-vue.md";
import ProjectDocsVSCodeSettings from "!!raw-loader!./_project-docs/vs-code-settings.md";
import ProjectDocsVSCodeExtensions from "!!raw-loader!./_project-docs/vs-code-extensions.md";
import ProjectDocsDocusaurus from "!!raw-loader!./_project-docs/docusaurus.md";

# Docusaurus

This is a highly opinionated take on how to configure and organize Docusaurus to help document the ins and outs of your application. There are many more features and settings that this guide does not utilize. You can read more about them in the [Docusaurus Documentation](https://docusaurus.io/)

## Installation

:::tip
Review the official [Docusaurus Installation Instructions](https://docusaurus.io/docs) for changes.
:::

Run the following command:

```terminal
pnpx create-docusaurus@latest docusaurus classic
```

:::info
Docusaurus installs in a sub directory as a separate application with it's own `package.json` defining dependencies and scripts. It may be better to organize your repo as a monorepo; where your application files are located within it's own sub directory. You may also consider using tools like [NX](https://nx.dev/) or [Turborepo](https://turborepo.com/docs) to manage task orchestration at the CI/CD layer. This is particularly useful to run `ESLint` and `Prettier` scripts using a single command from a single directory.
:::

## Cleanup

`cd docusaurus` and do the following:

- Delete the `README.md` file
- Delete the `./blog` and `./src` directories
- Keep the `./docs` directory but delete it's contents
- Inside `./static/img` keep or replace the `./static/img/favicon.ico` and `./static/img/logo.svg` files and delete everything else

## Docusaurus Config

Update `./docusaurus.confg.ts` configuration:

```ts title="docusaurus.confg.ts"
const config: Config = {
  title: "游리 YOUR TITLE HERE",
  tagline: "游리 YOUR TAGLINE HERE HERE",
  favicon: "img/favicon.ico",
  url: "https://游리YOUR-DOCUSAURUS-PRODUCTION-URL-HERE",
  baseUrl: "/",

  // 游리 Delete these 2 properties if you're not deploying to GitHub pages
  organizationName: "游리 GITHUB ORG/USER NAME",
  projectName: "游리 YOUR REPO NAME",

  onBrokenLinks: "throw",
  onBrokenAnchors: "warn",
  onBrokenMarkdownLinks: "warn",
  onDuplicateRoutes: "warn",

  presets: [
    [
      "classic",
      {
        docs: {
          routeBasePath: "/",
          sidebarPath: "./sidebars.ts",
          // 游리 `showLastUpdateTime` requires access to git history during the
          // build. It will not work correctly with shallow clones (a common
          // default for CI systems)
          showLastUpdateTime: true,
          // 游리 The value for `editUrl` follows the url pattern for GitHub repos. Other repos may differ
          editUrl: "游리 <YOUR REPO URL>/blob/main/docusaurus",
        },
        blog: false,
      } satisfies Preset.Options,
    ],
  ],

  themeConfig: {
    navbar: {
      title: "游리 YOUR DOCUMENTATION TITLE",
      logo: {
        alt: "游리 YOUR ALT TEXT",
        src: "img/logo.svg",
      },
      items: [
        {
          href: "游리 YOUR PROJECT REPO URL",
          label: "游리 Azure DevOps | GitHub | Bitbucket | Other",
          position: "right",
        },
      ],
    },
    prism: {
      theme: prismThemes.github,
      darkTheme: prismThemes.dracula,
    },
  } satisfies Preset.ThemeConfig,
};
```

## Sidebars Config

Update `sidebars.ts` configuration:

```ts title="sidebars.ts"
// Sidebar Documentation: https://docusaurus.io/docs/sidebar
const sidebars: SidebarsConfig = {
  mainSidebar: [
    {
      type: "autogenerated",
      dirName: ".", // '.' means the current docs folder
    },
  ],
};
```

## Add Initial Project Documentation

### `README.md`

Replace the contents of the repositories `README.md` file with one of the following:

<Tabs>
  <TabItem value="nextjs" label="NEXT.js" default>
    <CodeBlock language="markdown" title="README.md">
      {NEXTjsReadme}
    </CodeBlock>
  </TabItem>
  <TabItem value="angular" label="Angular" default>
    <CodeBlock language="markdown" title="README.md">
      {AngularReadme}
    </CodeBlock>
  </TabItem>
  <TabItem value="vue" label="Vue" default>
    <CodeBlock language="markdown" title="README.md">
      {VueReadme}
    </CodeBlock>
  </TabItem>
</Tabs>

### `index.mdx`

Create a `docusaurus/docs/index.mdx` file and add the following:

<CodeBlock language="mdx" title="docusaurus/docs/index.mdx">
  {ProjectDocsHomepage}
</CodeBlock>

### `01-scripts.md`

Create a `docusaurus/docs/01-scripts.md` file and add one of the following:

<Tabs>
  <TabItem value="nextjs" label="NEXT.js" default>
    <CodeBlock language="markdown" title="docusaurus/docs/01-scripts.md">
      {ProjectDocsScriptsNEXTjs}
    </CodeBlock>
  </TabItem>
  <TabItem value="angular" label="Angular" default>
    <CodeBlock language="markdown" title="docusaurus/docs/01-scripts.md">
      {ProjectDocsScriptsAngular}
    </CodeBlock>
  </TabItem>
  <TabItem value="vue" label="Vue" default>
    <CodeBlock language="markdown" title="docusaurus/docs/01-scripts.md">
      {ProjectDocsScriptsVue}
    </CodeBlock>
  </TabItem>
</Tabs>

### `02-code-quality`

Create a `docusaurus/docs/02-code-quality` directory and add the following:

#### `02-code-quality/_category_.json`

```json title="docusaurus/docs/02-code-quality/_category_.json"
{
  "label": "Code Quality"
}
```

### `03-libraries-tools`

Create a `docusaurus/docs/03-libraries-tools` directory and add the following:

#### `03-libraries-tools/_category_.json`

```json title="docusaurus/docs/03-libraries-tools/_category_.json"
{
  "label": "Libraries & Tools"
}
```

#### `03-libraries-tools/99-docusaurus.md`

<CodeBlock
  language="markdown"
  title="docusaurus/docs/03-libraries-tools/99-docusaurus.md"
>
  {ProjectDocsDocusaurus}
</CodeBlock>

### `04-ci-cd`

Create a `docusaurus/docs/04-ci-cd` directory and add the following:

#### `04-ci-cd/_category_.json`

```json title="docusaurus/docs/04-ci-cd/_category_.json"
{
  "label": "CI/CD"
}
```

### `98-vs-code`

Create a `docusaurus/docs/98-vs-code` directory and add the following files:

#### `98-vs-code/_category_.json`

```json title="docusaurus/docs/98-vs-code/_category_.json"
{
  "label": "VS Code"
}
```

#### `98-vs-code/01-vs-code-settings.md`

<CodeBlock
  language="markdown"
  title="docusaurus/docs/98-vs-code/01-vs-code-settings.md"
>
  {ProjectDocsVSCodeSettings}
</CodeBlock>

#### `98-vs-code/02-vs-code-extensions.md`

<CodeBlock
  language="markdown"
  title="docusaurus/docs/98-vs-code/02-vs-code-extensions.md"
>
  {ProjectDocsVSCodeExtensions}
</CodeBlock>

### `99-articles`

#### `99-articles/_category_.json`

```json title="docusaurus/docs/99-articles/_category_.json"
{
  "label": "Articles"
}
```
